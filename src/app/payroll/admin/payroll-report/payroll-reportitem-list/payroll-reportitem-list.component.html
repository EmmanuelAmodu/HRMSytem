<div [@routerTransition]>
    <div class="row margin-bottom-5">
        <div class="col-xs-6">
            <button (click)="back()" class="btn btn-default btn-small"><i class="fa fa-chevron-left"></i> {{l("BackToGroup")}}</button>
            <span>{{l("PayrollReportItems")}}</span> <small>{{l("PayrollReportItemsHeaderInfo")}}</small>
        </div>
        <div class="col-xs-6 text-right">
            <button (click)="exportToExcel()" class="btn btn-default"><i class="fa fa-file-excel-o"></i> {{l("ExportToExcel")}}</button>
            <button (click)="createPayrollReportItem()" *ngIf="isGranted('Payroll.Administration.Region.Create')" class="btn btn-primary blue"><i class="fa fa-plus"></i> {{l("CreateNewPayrollReportItem")}}</button>
        </div>
     </div>
    <!--<Primeng-Datatable-Start>-->
    <div class="primeng-datatable-container"
         [busyIf]="primengDatatableHelper.isLoading">
        <p-dataTable #dataTable
                     (onLazyLoad)="getPayrollReportItems($event)"
                     [value]="primengDatatableHelper.records"
                     rows="{{primengDatatableHelper.defaultRecordsCountPerPage}}"
                     [paginator]="false"
                     [lazy]="true"
                     emptyMessage="{{l('NoData')}}"
                     scrollable="true"
                     ScrollWidth="100%"
                     responsive="primengDatatableHelper.isResponsive"
                     resizableColumns="primengDatatableHelper.resizableColumns">

            <p-column field=""
                      header="{{l('Actions')}}"
                      [sortable]="false"
                      [style]="{'width':'60px'}">
                <ng-template let-record="rowData" pTemplate="body">
                    <div class="btn-group dropdown" normalizePosition>
                        <button class="dropdown-toggle btn btn-xs btn-primary blue"
                                data-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false">
                            <i class="fa fa-cog"></i><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li>
                                <a *ngIf="permission.isGranted('Payroll.Administration.Region.Edit')"
                                   (click)="editRecord(record.id)">{{l('Edit')}}</a>
                            </li>
                            <li>
                                <a *ngIf="permission.isGranted('Payroll.Administration.Region.Delete')"
                                   (click)="deleteRecord(record.id)">{{l('Delete')}}</a>
                            </li>
                        </ul>
                    </div>
                </ng-template>
            </p-column>
            <p-column field="ordinalPosition" header="{{l('OrdinalPosition')}}"></p-column>
            <p-column field="name" header="{{l('Name')}}"></p-column>
        </p-dataTable>
        <div class="primeng-paging-container">
            <p-paginator rows="{{primengDatatableHelper.defaultRecordsCountPerPage}}"
                         #paginator
                         (onPageChange)="getPayrollReportItems($event)"
                         [totalRecords]="primengDatatableHelper.totalRecordsCount"
                         [rowsPerPageOptions]="primengDatatableHelper.predefinedRecordsCountPerPage">
            </p-paginator>
            <span class="total-records-count">
                {{l('TotalRecordsCount', primengDatatableHelper.totalRecordsCount)}}
            </span>
        </div>
        <payroll-reportitem-edit #editPayrollReportItemModal (modalSave)="getPayrollReportItems()"></payroll-reportitem-edit>
    </div>
    <!--<Primeng-Datatable-End>-->

</div>
